%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out
                                                          % if you need a4paper
%\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4
                                                          % paper

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document



% The following packages can be found on http:\\www.ctan.org
%\usepackage{graphics} % for pdf, bitmapped graphics files
%\usepackage{epsfig} % for postscript graphics files
%\usepackage{mathptmx} % assumes new font selection scheme installed
%\usepackage{times} % assumes new font selection scheme installed
%\usepackage{amsmath} % assumes amsmath package installed
%\usepackage{amssymb}  % assumes amsmath package installed
\usepackage{graphicx} % for pdf, bitmapped graphics files

\title{\LARGE \bf
Rapid Flight Control Prototyping  - Steps Toward Cooperative Mission-Oriented Capabilities}

\author{Vladimir Dobrokhodov$^{1}$, Kevin Jones$^{2}$, and Isaac Kaminer$^{3}$% <-this % stops a space
\thanks{$^{1}$V.N. Dobrokhodov is a Research Associate Professor at the Department  of Mechanical and Aerospace Engineering,
        Naval Postgraduate School, Monterey, CA, 93943
        {\tt\small vldobr@nps.edu}}%
\thanks{$^{2}$K.D. Jones is a Research Associate Professor at the Department  of Mechanical and Aerospace Engineering,
        Naval Postgraduate School, Monterey, CA, 93943
        {\tt\small jones@nps.edu}}%
\thanks{$^{2}$I.I. Kaminer is a Professor at the Department  of Mechanical and Aerospace Engineering,
        Naval Postgraduate School, Monterey, CA, 93943
        {\tt\small kaminer@nps.edu}}%
}


\begin{document}



\maketitle
\thispagestyle{empty}
\pagestyle{empty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{abstract}
The paper describes the latest advancements in the development of the Rapid Flight Control Prototyping system that were motivated primarily by the need to enable cooperative missions of multiple unmanned aerial vehicles and by the desire to explore and enhance the capabilities of human operators to oversee the collaborative behaviors of multiple heterogeneous UAVs. The evolution of the system is driven by the mission level objectives and supported on one hand by the progress in miniature sensors, computational power, communication and portable energy technologies and on the other hand by the advanced capabilities of embedded control and communication oriented software. As a result the developed system enables rapid design, onboard integration and in-flight verification of multiple UAVs collaborative concepts that seemed impossible just a couple of years ago. Advantages of the designed system are illustrated by a number of scenarios that were recently developed and verified in flight by multiple cooperative UAVs. The paper concentrates on presenting the motivation and the conceptual design ideas which drive the evolution of flight prototyping platform.
\end{abstract}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{INTRODUCTION}
High operational utility of a single unmanned aerial vehicle (UAV) has been proven in recent years on many occasions.  Single UAV has been primarily used in various ISR missions  that have been designed around the capabilities of a single platform, in turn the onboard instrumentation were adjusted to facilitate a specific ISR utility of interest.  When properly designed the aerial platform provided a single unique autonomous capability however producing only a humongous amount of raw data  but intelligence content was still missing. The fact that the onboard intelligence is limited by various factors (probably it makes sense defining them here) resulted in the ``Large Data Problem'': a misleading exchange of quality for quantity. In real life scenarios this resulted in the raw data being streamed in close to real-time pace however the human analysts not being capable to process this amount of data in weeks after the mission. In response to this bottleneck of capabilities the R\&D community has focused its efforts on the faster processing and automated analysis. However, getting to the data faster, and utilizing more data through automated tools cannot solve some of the most difficult problems, among them is the precision and resolution of  data suitable for further use in predictive analytics. Thus, in order to eliminate the creation and need for large data sets, an intelligent high-precision and resolution capability for sensing and surveillance needs to be developed for time critical applications.

%In order to solve the problem of producing intelligence rather then data a significant effort is made across the R\&D community to extend both the onboard %intelligence that would enable initial raw data processing and the post-processing capabilities on the ground to enable the refined intelligence.

Overall, the vision of how to overcome the intelligence bottleneck and to develop a rich data set capability seems to be in the development of distributed platforms, both in the sense of distributed computational intelligence (onboard and ground ) as well as in distributing the airborne sensory capabilities that would leverage the features of multiple complementary sensors. Enabling this level of collaborative autonomy, considering given state of the art in communication, computational power and power technologies,  requires significant advances to be made in the areas of distributed mission planning, coordinated control, human-machine interaction, distributed data processing to name a few. Some of these capabilities need to be transitioned from the laboratory environment onboard of multiple collaborative UAVs and proven working in flight in a realistic setup. 

As steps toward developing and implementing these capabilities in flight, the Unmanned Aerial Systems laboratory at NPS has been developing a Rapid Flight Control Prototyping system (RFCPS). Over years of evolution the RFCPS system has arrived to the state capable of implementing a number of the desired solutions in flight. The key capabilities of the system enable verifiable (repeatable) execution of the multiple heterogeneous UAVs cooperative missions, onboard data preprocessing, in-flight information streaming and sharing; some of them are running onboard while always providing the required level of collision avoidance  and flight safety in a multiple UAV sense. When a mission is planned ahead it creates a set of collaborative tasks accounting for the mission objective along with the capabilities of UAV platforms. When executed in flight by multiple UAVs the context-driven raw data preprocessing is followed by an intelligent reaction. Therefore, focused and context adaptive tasking that assumes collaboration among multiple players results in significantly lower volumes of high quality data.

%The developed hardware and software setup is capable of integrating a wide range of disparate data sources and computational methods and tools for %connecting such that the predesigned collaborative mission allows for the context-driven raw data preprocessing followed by an intelligent reaction.

The RFCPS system is evolutionary built around capabilities of an advanced autopilot connected over a real-time communication link with a secondary set of controllers responsible for a variety of tasks including real-time flight-critical control, raw data pre-processing, and robust communication tasks. Rapid hardware prototyping that "mimics" CAD drawings in strong and lightweight materials, new microcontrollers and high speed and precision actuators enable quick integrating onboard of various sensors. Novel high-bandwidth wireless IP communication link allows beyond the LOS in-flight transmission of sensory information and the R\&D telemetry without any need to utilize the primary CC link. New software solutions implementing advanced cooperative GNC algorithms, robust communication messaging and onboard sensory data processing enable cooperative flight of multiple heterogeneous UAVs and their interaction with human operators. Thus, the systems engineering effort of designing and integrating various components resulted in a system capable to rapidly prototype a mission of unknown complexity.

The paper  addresses  the underlying design concepts implemented by the RFCPS system, the presentation focuses on architectural ideas and the results achieved by the setup. Thus, Section II of the paper outlines two basic types of rapid control prototyping systems that were initiated at the UAV lab: they include OS-based and a System on a Chip (SOC) designs. While the latter one is briefly presented, the primary focus of this publication is given to the OS-based architectures. Illustrating the Model Based Design (MBD) paradigm and the rapid verifiable code generation that are provided by the Simulink and Simulink Coder tools, the xPC-based design is presented as a first step in transitioning a theoretical concept to real flight.  The steps of transitioning the same solution (already flown) to the Linux-based semi-industrial implementation are presented next. Chapter IV demonstrates a set of multiple cooperative UAV missions that illustrate the developed solutions in flight. 

\section{UAV Software Prototyping Solutions}

Over the years of control algorithms development and fight experimentation it has been observed that in order to transition a theoretically proven result in flight a number of solutions of various engineering fields need to simultaneously converge to a unifying design. The list of those disciplines varies depending on the objectives of the project. However the core remains the same and includes the following: materials and structural design accompanied with hardware prototyping, aero and flight dynamics, GNC disciplines, onboard electronics and sensors integration, communication and signal processing, and software engineering. To guarantee safe and verifiable flight experimentation and timely results it is often convenient to split the design process into a number of phases and then concentrate on developing a reliable solution at each step. 

One of the key elements in building a reliable solution of an onboard flight control system is based on utilizing a set of tools that enable control  system design, automatic code generation and its formal verification and validation. The MathWorks's MatLab/Simulink and the Simulink coder are the tools that provide a well-developed model based design (MBD) approach to the modeling and  simulation of various engineering systems and processes. Control system design is especially well-supported by Simulink and a number of control oriented toolboxes. Capabilities of the Simulink coder (formerly called the Real-Time Workshop) significantly extend the applicability of solutions developed by utilizing the core capabilities of the MatLab-Simulink environment. The code, that is auto-generated by the system can be easily customized to address the specifics of the control design task, available hardware (sensors and actuators) and the airborne platform requirements. A number of code generation options addressing specific microprocessor architectures is provided by the Simulink coder.

As a results of control prototyping and fight experimentation a number of solutions has been developed and flight tested, see the hierarchy of possible computational platforms in Fig.~\ref{fig:Platforms}. All of the developed solutions were driven by the objective of utilizing a set of software tools specifically developed for the design of real-time control algorithms and their formal software verification.
\begin{figure}[thpb]
	\centering
	\includegraphics[width=78mm]{Pictures/Figure_01.pdf}
	\caption{Hierachy of computational platforms.}
	\label{fig:Platforms}
\end{figure}

When a design task requires developing a standalone solution (feedback controller) that is self sufficient (does not depend on additional services), can be executed by a microprocessor capable of communicating with external sensors (measure states) and actuators (execute control commands), and does not require frequent modification, then  a system on a chip (SOC) is one of the viable options. The generated code that is usually called a firmware is uploaded to the chip memory once and then enables the code execution at every time when the system is turned on. The SOC design approach that starts with pure Simulink modeling, code generation and implementation on one of the most widely used microcontrollers (dsPIC) was recently demonstrated in a number of successful flight tests, see Ref[]. The systems built on SOC approach are very capable and robust, however do not enable in-flight modifications of the onboard algorithms. Although this might seem unnecessary, the flexibility and convenience of the ``modification at any time'' option is very desirable especially considering that modern UAV platform can provide 2-3 hours of a single flight endurance thus potentially enabling multiple ``code modifications'' to be flight tested if necessary. Thus, the SOC approach is usually considered as a final step of algorithm integration, when the code is proven working and there is no need for further immediate modification.

<<<<<<< HEAD
<<<<<<< HEAD
Over the years of development it has been observed that in order to transition a theoretically proven result in flight a number of solutions originated in seemingly disparate fields of expertise need to simultaneously converge to a unifying design. The list of those disciplines varies depending on the objectives of the project. However the core of the list always remains the same: materials and structural design and hardware prototyping, aero and flight dynamics, GNC disciplines, onboard electronics and sensors integration, signal processing, embedded software engineering. To guarantee safe and verifiable flight experimentation and timely results it is often convenient to split the design process into a number of phases and then concentrate on developing a reliable solution at each step. To facilitate the convergence of multiple disciplines and depending on the project final deliverables the RFCPS design supports a number of platforms for final implementation; this platform that eventually runs the solution is commonly called a target platform. 
Over the years of evolutuion the
=======
Over the years of development it has been observed that in order to transition a theoretically proven result in flight a number of solutions originated in seemingly disparate fields of expertise need to simultaneously converge to a unifying design. The list of those disciplines varies depending on the objectives of the project. However the core of the list always remains the same: materials and structural design and hardware prototyping, aero and flight dynamics, GNC disciplines, onboard electronics and sensors integration, signal processing, embedded software engineering. To guarantee safe and verifiable flight experimentation and timely results it is often convenient to split the design process into a number of phases and then concentrate on developing a reliable solution at each step. 
>>>>>>> origin/master
=======
On the other hand, the specifics of R\&D work frequently require modifications of the underlying algorithms. Thus the ``xPC embedded target'' option, provided by the Simulink Coder is one of the best solutions  enabling frequent and rapid code modification and reintegration. An xPC target environment is a hard real-time operating system that executes the real time code (task) that is built by the coder supporting a number of computational platforms. The solution provides various services typical for an operating system while supporting preemptive mechanism  for real time tasks scheduling and execution. The RFCPS system utilizes this option for standard \emph{Intel}x$86$ processor. While the xPC embedded target option is very flexible, it still requires ``manual'' coding in a number of occasions. Since it is hard to expect that every new piece of hardware has the same communication protocol and is supported by Mathwork's, one of the primary needs for manual coding does arise when a new communication protocol need to be implemented. Simulink coder enables integration of customized algorithms by means of s-functions; the process is time consuming and error prone, however it is well documented and straightforward. 
>>>>>>> origin/master

The desire to focus on rapid and verifiable flight implementation of new theoretical results and well-developed legacy codes, given in a variety of programming languages, while spending less time on the code development and re-integration resulted in targeting a new computational platform. The high efficiency of Linux operating system and high computational power of modern miniature computers lead to integrating this system into flight experimentation. Furthermore, the objectives of collaborative missions and distributed computation require integration of messaging and synchronization mechanisms that are robust to network failures and communications dropouts. A number of industrial-grade software packages that enable communication across multiple networking nodes while explicitly addressing the messaging protocols and algorithms that are resilient to faults across local and wide area networks have been recently developed, see [SPREAD],[MOOS]. Therefore, the most recent modification of the RFCPS included the implementation of Simulink/Coder built algorithms into the Linux operating system. The capabilities of Simulink to utilize communication buses and features of the Simulink coder allow generating C/C++ libraries that are directly suitable for compilation and execution on Linux. Software API of the SPREAD toolkit enables efficient messaging across various tasks executed across multiple wirelessly connected UAVs. No manual modification of the library code is necessary, however the tasks scheduling file (main) needs to explicitly define the sampling rate of each of the code components and the messaging mechanism. Special consideration is now given to scheduling of the flight-critical and not critical tasks. One of the initially developed scheduling solution utilizes a simple function call to the CPU time clock. Comparing the clock time with the required execution rate enabled efficient implementation of the required sampling of various tasks (daemons) in Linux. The most recent solution that adopts the same auto-generated code and is based on more rigorous real time scheduling capabilities of ROS/OROCOS operating system [ROS],[OROCOS] has been also tested in the laboratory environment.

\subsection{RFCPS Architecture}

To enable the desired collaborative functionality the RFCPS system representing a single UAV is  comprised of the onboard and the ground segment, see Figure~\ref{fig:RFCPS_arch} .The onboard segment is built around an autopilot that brings the basic functionality of a UAV flight to the system. The current implementation of RFCPS utilizes the Piccolo series autopilots and the corresponding ground control station that enables simultaneous operation of multiple UAVs but does not have any cooperative mission execution functionality prebuilt. 

\begin{figure}[h]
	\centering
	\includegraphics[width=80mm]{Pictures/Figure_02.pdf}
	\caption{Single autonomous platform as a building block of RFCPS.}
	\label{fig:RFCPS_arch}
\end{figure}


The autopilot is connected over a full duplex serial link to a flight control PC104 computer. In xPC target version, a set of communication drivers is custom built that enable hard real time communication with the AP. The drivers enable \emph{send command} and \emph{read states} functionality and are written as s-functions; they are automatically compiled into a binary executable file by the Simulink coder at the stage of code generation. As soon as the UAV telemetry becomes available it is first used to implement the desired collaborative behavior and to control the onboard utility sensor (for example  - a high resolution camera) and its platform; for most of the ISR type missions it is common to have the imagery sensors installed on a gimbaled platform. The telemetry data is also distributed across the local onboard and the ground ethernet network for the secondary use. In particular, the data PC104 computer utilizes the AP telemetry data and the utility sensor information to preprocess the raw data and extract the intelligent data of interest. A very appealing feature of this data PC is that it runs a Linux operating system that enables a number of convenient services and provides very flexible access to a variety of sensors. Unlike the xPC target system, the integration a new sensor becomes a matter of integrating a new driver that is usually provided by the sensor manufacturer while integrating a new piece of hardware that is not supported by the xPC target is often a significant effort. As it will be shown in the following chapter this data computer runs algorithms that are primarily not time-critical and do not affect the stability of UAV  flight. In the case of utilizing video cameras as ISR utility sensors the onboard instrumentation also contains a miniature video streaming server; although it is a single pice of hardware,  it is comprised of a frame grabber taking the analog video feed and a web server that enables live streaming of the video input into the IP based network. Since all of the onboard components are connected over the hight speed (up to 1GigE) ethernet a number of convenient capabilities of the code development become available; some of the not flight-critical algorithms can be stopped, modified and updated while still in flight thus providing the desired flexibility for the research.

The last significant onboard component is the power management system. Depending on the specific objectives of a project it allows integrating into onboard information system a set of solar panels and batteries. As it will be demonstrated in the following chapter, the integration of high-output solar cells onboard enables harvesting solar radiation thus significantly extending endurance of autonomous thermal soaring gliders. Continuos monitoring of the current state of the energy of all onboard sources enables RFCPS system to optimally plan and execute the mission.

The ground segment of RFCPS is comprised of two parts; the first part is a standalone ground control station (GCS), an operator interface (OI) computer and a command and control (CC) link provided by the autopilot manufacturer, and the second part is the research environment that is customized according to the needs of a specific mission under development. The fact that the onboard software is separated into flight safety critical and not flight critical defines the configuration of the R\&D development environment. As an example, the sensory data processing algorithms that are not flight critical are run on a data PC; two primary OS systems are currently used - the Ubuntu Linux and ROS operating systems. The flight critical tasks are run under either xPC target or the Linux/ROS(OROCOS) environments. Although the hardware of both PC104 computers is identical (for convenience) the task based separation is preserved to guarantee safety of flight experimentation and reliability of the experimental results.

To preserve the rigor of theoretical development while transitioning the results in flight the core of cooperative flight control algorithms is developed utilizing advanced capabilities of the MatLab/Simulink environment. The Model Based Design (MBD) paradigm supported by a number of code verification and automatic code generation tools is what makes the transition very reliable. The algorithms are designed and verified in Simulink with minimal or no use of low level programming. When debugged, the xPC target environment is used first to enable the Hardware In the Loop (HIL) simulation; Piccolo AP is well-supported with this functionality. Therefore, integrating and verifying the newly built algorithms becomes straightforward; at the same time a number of data processing scripts can be built ahead of time to facilitate quick flight data analysis. After confirming the desired performance of cooperative mission in HIL, the same xPC based code is transformed into real time executable and then flown in the air. 
After a series of flight experiments in different flight conditions the algorithms and the operational environment mature enough to allow building a set of standalone libraries for future Linux or ROS integration. The volume limitation of the paper does not allow to describe all the benefits of this new direction. However it is sufficient to note that the same development concept is  followed and the same code that is built by the Simulink coder is used to transition the flight validated solution into a highly reliable Linux/ROS based computational platform. An interested reader is referred to Ref [ROS/OROCOS] for mored details.

\section{Experimental Results}

To illustrate the benefits of RFCPS system that enable cooperative autonomous aerial missions this section  reviews two most recent projects: the coordinated road search by multiple UAVs and the onboard integration of cognitive automation system in support of dynamic mission planning and execution. Each of these experiments highlights the key benefits of the OS-based approach.

\subsection{Coordinated Road Search by Multiple UAVs} 

The objective of this project was to enable a minimally trained user to utilize a number of  sensors installed onboard of heterogeneous UAVs without any need for him to be trained in flying UAVs. The concept of operation assumes that one path is generated for a number of sensors so that when they are flown autonomously the intersection of their fields of view is maximized. It is assumed that sensors are complementary( for example they can be electro-optical and infrared) and might have different installation onboard of UAV; body-fixed, stabilized only in roll angle or both - roll and pitch angles. Since the sensors have different degrees of freedom and the UAVs have different flight dynamic limitations, the only method of enabling the multiple sensors to coordinate their fields of view is by enabling tight cooperation of the aerial platforms. Therefore, as soon as the sensor path is extracted by the user utilizing a digital map (scribble over the map), it is parameterized by polynomials and submitted onboard of airborne UAVs. The paths of each UAV and the desired nominal velocity profiles are then computed while accounting for the desired resolution of the sensors data, the UAVs flight dynamic constraints and the gimbals limitations. The UAVs are then assigned the corresponding paths with different velocity profiles; this paths define the shape of the search segment. To execute the search the UAVs should start from their current flight state (initial conditions) and perform a coordinated arrival to the beginning of the search segment. This arrival path and the velocity profiles are calculated onboard taking into account the flight dynamics  and the collision avoidance constraints.

   \begin{figure}[thpb]
      \centering
      \framebox{\parbox{3in}{Coordinated road search by multiple UAVs.}}
      %\includegraphics[scale=1.0]{figurefile}
      \caption{Coordinated road search mission}
      \label{CPF_concept}
   \end{figure}

The concept [CPF] that is implemented by each UAV during the mission is based on the explicit separation of time and space. The  path is parameterized by algebraic polynomials, therefore the number of parameters defining the path is finite and depends on the class and the degree of the chosen polynomial representation. Supported by robust communication protocols this approach enables feasible for real time execution path generation and simple and inexpensive communication of the intent and current state of each UAV that is critical especially for the collision avoidance, see Fig.~\ref{fig:CPF}. The path following control [CPF] for fixed wing UAVs is enabled by using attitude control commands: pitch and yaw rates are the primary control signals utilized by the nonlinear control law. If the UAVs were following the assigned path and the velocity profiles precisely then there would not be any need for tight flight coordination; the coordination is already accounted at the stage of the path and velocity generation. However each UAV is subject to a number of disturbances resulting in the path following and coordination errors. To cancel the coordination errors, the  velocity of each UAV is controlled according to its relative position error on the path that is calculated based on the position of coordinated UAVs continuously transmitted over the wireless network. The developed algorithm is robust to network dropouts and allows tight coordination of a number of UAVs flying in a realistic environment. Besides the coordination and path following algorithms the onboard flight-critical computer runs the  $L_1$ adaptive control law implemented as output feedback augmentation loop around the nominal autopilot; the overall coordinated path following control architecture is presented in Fig.~\ref{fig:CPF}.  Implementing the $L_1$ adaptive controller onboard provides guaranteed performance of the entire multiple UAV system in a wide range of operational conditions with no need for retuning of the individual systems component, an interested reader is referred to [$L_1$ CPF] for more details.

   \begin{figure}[thpb]
      \centering
      %\framebox{\parbox{3in}{Control architecture of the cooperative mission.}}
      \includegraphics[width=80mm]{Pictures/Figure_04.pdf}
      \caption{Control architecture of the cooperative mission}
      \label{fig:CPF}
   \end{figure}

The desired performance of airborne sensors in this scenario is enabled by the ability to execute onboard the path following and coordination algorithms in hard real time and the imagery and video processing tasks executed as non-real time critical processes. Furthermore, while transmitting the overlapped video and imagery over the wireless network, the data pre-processing algorithms  solve a number of typical tasks such as extraction of objects of interest (cars, people, buildings e.t.c) and their geo-referencing. Therefore, by enabling coordination not only the content of sensory data becomes rich and meaningful but the operator is alerted when an object of interest is detected. The overall load of the operator thus is significantly lower. 

\subsection{Cognitive Automation in Support of Mission Planning and Execution} 

The objective of this project was to assist a single operator in designing and executing a multiple UAVs mission by combining the high-level mission planning algorithms with cooperative path following of a number of UAVs. As a first step in achieving this goal the project and the experimental setup concentrated on a single UAV mission while the rest of the fleet being modeled on the ground. However, the overall cognitive decision making, control and communication solutions were design to support a multi-vehicle configuration. 

In this scope, the CoCAMPUS (Cooperative Cognitive Automation through Mathematically optimized Path-Following of UAVs) project [Schulte] was conducted to explore how to properly support a single operator in mission-design and flight-control to enhance the overall multiple UAVs system performance. An exemplary mission was chosen based on a simplified Air-Attack scenario that also including static threats at unknown locations; it was assumed that the UAVs will discover the static surface to air missile (SAM) sites during the mission execution. The Cognitive System Architecture (COSA2) is designed and integrated onboard  to dynamically implement cognitive automation behavior on the basis of current understanding of tactical situation and explicit knowledge models,  while deriving implicit cost-functions and defining the path optimization constraints adaptively during the flight.

Artificial Cognitive Units (ACUs) onboard the UAV are used to implement task-based guidance and mimic human rationality to some extent, forming so-called cognitive automation, processing information mostly on a symbolic level. The ACU’s behavior is completely defined by its goal,which is explicitly represented as knowledge in its implementation.The ACU allows knowledge-based implementation such as decision making and planning depending on the available tactical observations and understanding of the current situation. It also offers semi-autonomous capabilities, in a sense that the ACU pursues a given task autonomously using the automation built inside the UAV’s system.

The objective of a single human operator in the Air-Attack mission is to perform a combat air patrol (CAP) and, upon detection of a ground vehicle and its identification, to approach and attack the target. The no-fly zones as well as static threats in form of SAM-sites are to be avoided as they are detected. The ground vehicle is located on a road inside the mission area and its coordinates are given by an external reconnaissance system cooperating with the operator. The final approach to the target by a UAV should be performed at an optimal course angle providing the highest effectiveness of released weapon; during the experimentation the effectiveness was evaluated by taking a picture at the calculated release point and analyzing if the target was present in the camera frame. 

Figure~\ref{fig:CAP_mission} presents the mission progress during the CoCAMPUS flight trials. The flight path can be separated into two consecutive segments. First, the operator chose and commanded the desired CAP “CAP A” to the ACU in point 1. Upon arriving and orbiting at the CAP (point 2) and reevaluating the situation, the operator tasked the ACU to attack the vehicle. The UAV started the task by dynamically calculating an optimal approach to the road (point 3) before attacking the target vehicle in point 4. Upon taking a picture, the ACU commanded to circle the target’s position. At all times during the mission, the ACU monitored the UAV’s systems and flight states and matched them with its own projection of future environment states, to ensure the fulfillment of the task-queue and possibly counteract aberrations. The path generation module took into account all given threats and dynamic constraints to ensure a safe, feasible path and to allow the best approach to the target. 

   \begin{figure}[thpb]
      \centering
      %\framebox{\parbox{3in}{Control architecture of the cooperative mission.}}
      \includegraphics[width=86mm]{Pictures/CAP_mission.pdf}
      \caption{Air-Attack mission results with overlaid tactical elements and SAM sites.}
      \label{fig:CAP_mission}
   \end{figure}

The tasks of cognitive automation as well as flight critical control have been implemented onboard of single CPU running Linux operating system. The coordinated path following task has been designed as in previous experiment in Simulink and the code was auto-generated and recompiled in Linux. The flight control law was manually scheduled at $100 Hz$ rate while the communication with Piccolo autopilot run at $50 Hz$. The cognitive automation tasks were running natively in Linux as a background process.

Flight tests were performed over three consecutive days and have shown very promising results. These real-world flight trials have proven the feasibility and the benefits of the presented approach and the developed hardware architecture. The goal-driven ACU enhances the system robustness in mission execution and supports the human operator, resulting in a reduced workload.

\subsection{Conclusion}
The paper presented the most recent architectural modifications of the Rapid Flight Control Prototyping system that specifically address the cooperative missions of multiple unmanned aerial vehicles. The design of the RFCPS is driven by the mission level objectives and is enabled on the one hand by the progress in miniature sensors, computational power, communication and portable energy technologies and on the other hand by the advanced capabilities of embedded control and communication oriented software. As a result, the RFCPS enables rapid "prototyping of cooperative mission" of multiple UAVs that seemed impossible just a couple of years ago. 

\addtolength{\textheight}{-12cm}   % This command serves to balance the column lengths
                                  % on the last page of the document manually. It shortens
                                  % the textheight of the last page by a suitable amount.
                                  % This command does not take effect until the next page
                                  % so it should come on the page before the last. Make
                                  % sure that you do not shorten the textheight too much.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section*{ACKNOWLEDGMENT}

Over the year of the RFCPS development the authors were funded in part by Air Force Office of Scientific Research under Contract No. FA9550–09–1–0265 and FA9550-05-1-0157; The National Air and Space Adminis- tration under Contracts NNX08BA64A, NNX08BA65A, NNX08AB97A, NNX08AC81A, and NNL08AA12I; ARO under Contract No.W911NF-06-1-0330, the USSOCOM/NPS Field Expe- rimentation Cooperative, the Office of Naval Research under Contract N00014-05-1-0828. All authors received support from the USSOCOM/NPS Field Experimentation Cooperative.



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{thebibliography}{99}

\bibitem{c1} G. O. Young, “Synthetic structure of industrial plastics (Book style with paper title and editor),” 	in Plastics, 2nd ed. vol. 3, J. Peters, Ed.  New York: McGraw-Hill, 1964, pp. 15–64.
\bibitem{c2} W.-K. Chen, Linear Networks and Systems (Book style).	Belmont, CA: Wadsworth, 1993, pp. 123–135.
\bibitem{c3} H. Poor, An Introduction to Signal Detection and Estimation.   New York: Springer-Verlag, 1985, ch. 4.
\bibitem{c4} B. Smith, “An approach to graphs of linear forms (Unpublished work style),” unpublished.
\bibitem{c5} E. H. Miller, “A note on reflector arrays (Periodical style—Accepted for publication),” IEEE Trans. Antennas Propagat., to be publised.
\bibitem{c6} J. Wang, “Fundamentals of erbium-doped fiber amplifiers arrays (Periodical style—Submitted for publication),” IEEE J. Quantum Electron., submitted for publication.
\bibitem{c7} C. J. Kaufman, Rocky Mountain Research Lab., Boulder, CO, private communication, May 1995.
\bibitem{c8} Y. Yorozu, M. Hirano, K. Oka, and Y. Tagawa, “Electron spectroscopy studies on magneto-optical media and plastic substrate interfaces(Translation Journals style),” IEEE Transl. J. Magn.Jpn., vol. 2, Aug. 1987, pp. 740–741 [Dig. 9th Annu. Conf. Magnetics Japan, 1982, p. 301].
\bibitem{c9} M. Young, The Techincal Writers Handbook.  Mill Valley, CA: University Science, 1989.
\bibitem{c10} J. U. Duncombe, “Infrared navigation—Part I: An assessment of feasibility (Periodical style),” IEEE Trans. Electron Devices, vol. ED-11, pp. 34–39, Jan. 1959.
\bibitem{c11} S. Chen, B. Mulgrew, and P. M. Grant, “A clustering technique for digital communications channel equalization using radial basis function networks,” IEEE Trans. Neural Networks, vol. 4, pp. 570–578, July 1993.
\bibitem{c12} R. W. Lucky, “Automatic equalization for digital communication,” Bell Syst. Tech. J., vol. 44, no. 4, pp. 547–588, Apr. 1965.
\bibitem{c13} S. P. Bingulac, “On the compatibility of adaptive controllers (Published Conference Proceedings style),” in Proc. 4th Annu. Allerton Conf. Circuits and Systems Theory, New York, 1994, pp. 8–16.
\bibitem{c14} G. R. Faulhaber, “Design of service systems with priority reservation,” in Conf. Rec. 1995 IEEE Int. Conf. Communications, pp. 3–8.
\bibitem{c15} W. D. Doyle, “Magnetization reversal in films with biaxial anisotropy,” in 1987 Proc. INTERMAG Conf., pp. 2.2-1–2.2-6.
\bibitem{c16} G. W. Juette and L. E. Zeffanella, “Radio noise currents n short sections on bundle conductors (Presented Conference Paper style),” presented at the IEEE Summer power Meeting, Dallas, TX, June 22–27, 1990, Paper 90 SM 690-0 PWRS.
\bibitem{c17} J. G. Kreifeldt, “An analysis of surface-detected EMG as an amplitude-modulated noise,” presented at the 1989 Int. Conf. Medicine and Biological Engineering, Chicago, IL.
\bibitem{c18} J. Williams, “Narrow-band analyzer (Thesis or Dissertation style),” Ph.D. dissertation, Dept. Elect. Eng., Harvard Univ., Cambridge, MA, 1993.
\bibitem{c19} N. Kawasaki, “Parametric study of thermal and chemical nonequilibrium nozzle flow,” M.S. thesis, Dept. Electron. Eng., Osaka Univ., Osaka, Japan, 1993.
\bibitem{c20} J. P. Wilkinson, “Nonlinear resonant circuit devices (Patent style),” U.S. Patent 3 624 12, July 16, 1990.






\end{thebibliography}




\end{document}
